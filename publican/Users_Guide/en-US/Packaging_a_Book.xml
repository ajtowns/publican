<?xml version='1.0' encoding='utf-8' ?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
]>

<section id="sect-Users_Guide-Using_the_publican_package-Packaging_a_Book">
	<title>Packaging a book</title>
	<xi:include href="Applicable_to_RPM_only.xml" xmlns:xi="http://www.w3.org/2001/XInclude"></xi:include>
	<para>
		<application>Publican</application> not only builds documentation as HTML and PDF files, but it can package these files for distribution to individual workstations and to web servers as <firstterm>RPM packages</firstterm>. RPM packages are used to distribute software to computers with Linux operating systems that use the <application>RPM Package Manager</application>. These operating systems include Red Hat Enterprise Linux, Fedora, Mandriva Linux, SUSE Linux Enterprise, openSUSE, Turbolinux, and Yellow Dog Linux, to name just a few. 
	</para>
	<section id="sect-Users_Guide-Using_the_publican_package-Packaging_a_Book-Types_of_RPM_packages">
		<title>Types of RPM packages</title>
		<para>
			<application>Publican</application> can produce both <firstterm>source RPM packages</firstterm> (<firstterm>SRPM packages</firstterm>) and <firstterm>binary RPM packages</firstterm>. Furthermore, both SRPM packages and binary RPM packages can be configured to deploy to workstations or web servers. 
		</para>
		<section id="sect-Users_Guide-Using_the_publican_package-Packaging_a_Book-Types_of_RPM_packages-Source_and_binary">
			<title>Source RPM packages and binary RPM packages</title>
			<para>
				An SRPM package contains the source code used to generate software rather than the software itself. To use an SRPM package, a computer must <firstterm>compile</firstterm> the source code into software — or in this case, into documents. SRPM packages of <application>Publican</application> documents contain XML files rather than finished documents. To install documentation from the SRPM package to a computer, the computer must have <application>Publican</application> installed on it. When you try to install the SRPM package on a computer that does not have <application>Publican</application> installed, the <application>RPM Package Manager</application> looks for <application>Publican</application> in the software repositories that are available to it. The <application>RPM Package Manager</application> installs <application>Publican</application> first, so that it can build and install the document contained in the SRPM package. If the <application>RPM Package Manager</application> cannot find and install <application>Publican</application>, installation of the SRPM package will fail.
			</para>
			<para>
				Conversely, binary RPM packages contain software — or in this case, documents — that is ready to copy to a location in the computer's file system and use immediately. The contents of the binary RPM package do not need to be compiled by the computer onto which they are installed, and therefore, the computer does not need to have <application>Publican</application> installed. 
			</para>
		</section>
		<section id="sect-Users_Guide-Using_the_publican_package-Packaging_a_Book-Types_of_RPM_packages-Desktop_and_web">
			<title>Desktop packages and web packages</title>
			<para>
				<application>Publican</application> can package documents for reading on a computer workstation (a <firstterm>desktop RPM package</firstterm>) or to install on a web server and publish on the world-wide web (a <firstterm>web RPM package</firstterm>). The desktop RPM package of a <application>Publican</application> document and the web RPM package of the same document differ mainly in the location in a computer's file system to which they are installed, and in the formats in which the documentation is presented.
			</para>
			<para>
				Desktop RPM packages of <application>Publican</application> documents contain the documentation in single-page HTML format. Documents distributed in these packages are installed in a subdirectory of <filename>/usr/share/doc/</filename>, the location specified by the <citetitle>Filesystem Hierarchy Standard</citetitle> (<citetitle>FHS</citetitle>) for &lsquo;Miscellaneous documentation&rsquo;.<footnote><para>Refer to <ulink url="http://www.pathname.com/fhs/pub/fhs-2.3.html#USRSHAREARCHITECTUREINDEPENDENTDATA">http://www.pathname.com/fhs/pub/fhs-2.3.html#USRSHAREARCHITECTUREINDEPENDENTDATA</ulink></para></footnote> The desktop RPM package also contains a <firstterm>desktop file</firstterm>, to be placed in <filename>/usr/share/applications/</filename>. This file enables <firstterm>desktop environments</firstterm> such as GNOME and KDE to add the installed document to their menus for ease of reference by users.
			</para>
			<para>
				Web RPM packages of <application>Publican</application> documents contain the documentation in single-page HTML, multi-page HTML, and PDF formats. They are installed in a subdirectory of <filename>/var/www/html/</filename>, a common <firstterm>document root</firstterm> for web servers. 
			</para>
		</section>
	</section>
	<section id="sect-Users_Guide-Using_the_publican_package-Packaging_a_Book-The_publican_package_command">
		<title>The <command>publican package</command> command</title>
		<para>
			Use the <command>publican package --lang=<replaceable>Language_Code</replaceable></command> command to package documents for distribution in the language that you specify with the <option>--lang</option> option. Refer to <xref linkend="appe-Language_Codes"/> for more information about language codes.
		</para>
		<para>
			If you run <command>publican package</command> with no options other than the mandatory <option>--lang</option> option, <application>Publican</application> produces a source RPM package of documents to install to a web server. The full range of options for <command>publican package</command> is as follows:
		</para>
		<variablelist>
			<varlistentry>
				<term><option>--lang</option></term>
				<listitem>
					<para>
						specifies the language in which to package the documentation. 
					</para>
					<note>
						<title>Incomplete translations</title>
						<para>
							If translation in a particular language is not complete by the scheduled release date, consider marking the language with the <parameter>ignored_translations</parameter> parameter in the document's <filename>publican.cfg</filename> file. The package will be named appropriately for the language, but will contain documentation in the original language of the XML rather than a partial translation. When translation is complete, remove the <parameter>ignored_translations</parameter> parameter, increase the <literal>pubsnumber</literal> in the <filename>Book_Info.xml</filename> file, and generate the package again. When you distribute the revised package, it becomes available to replace the original untranslated package. 
						</para>
					</note>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term><option>--desktop</option></term>
				<listitem>
					<para>
						specifies that <application>Publican</application> should create a desktop RPM rather than a web RPM. 
					</para>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term><option>--brew</option></term>
				<listitem>
					<para>
						specifies that <application>Publican</application> should push the completed package to <application>Brew</application>. <application>Brew</application> is the build system used internally by Red Hat; this option is meaningless outside Red Hat.
					</para>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term><option>--scratch</option></term>
				<listitem>
					<para>
						when used together with the <option>--brew</option> option, specifies that a SRPM package should be built as a <firstterm>scratch build</firstterm> when sent to <application>Brew</application>. Scratch builds are used to verify that a SRPM package is structured correctly, without generating a binary RPM package.
					</para>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term><option>--short_sighted</option></term>
				<listitem>
					<para>
						specifies that <application>Publican</application> should build the package without including the version number of the software (<parameter>version</parameter> in the <filename>publican.cfg</filename> file) in the package name. 
					</para>
					<warning>
						<title>Omitting the software version number</title>
						<para>
							Much software documentation is version-specific. At best, the procedures documented in the documentation for one version of a product might not help you to install, configure, or use a different version of the product. At worst, the procedures described in the manual for one version might be misleading or even harmful when applied to a different version.
						</para>
						<para>
							If you distribute documentation as RPM packages without version numbers in the package name, the <application>RPM Package Manager</application> on users' computers will automatically replace any existing documentation with the documentation for the latest version; users will not have access to documentation for more than one version of the software at a time. Be certain that this outcome is the outcome that you want.
						</para>
					</warning>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term><option>--binary</option></term>
				<listitem>
					<para>
						 specifies that <application>Publican</application> should build the package as a binary RPM package. 
					</para>
				</listitem>
			</varlistentry>
		</variablelist>
		<para>
			After you run the run <command>publican package</command> command, <application>Publican</application> outputs completed SRPM packages to the document's <filename>tmp/rpm</filename> directory, and completed binary RPM packages to the document's <filename>tmp/rpm/noarch</filename> directory.
		</para>
		<para>
			By default, <application>Publican</application> documentation packages are named <filename><replaceable>productname</replaceable>-<replaceable>title</replaceable>-<replaceable>productnumber</replaceable>-<replaceable>[web]</replaceable>-<replaceable>language</replaceable>-<replaceable>edition</replaceable>-<replaceable>pubsnumber</replaceable>.<replaceable>[build_target]</replaceable>.noarch.<replaceable>file_extension</replaceable></filename>. <application>Publican</application> uses the information in the document's <filename>publican.cfg</filename> file to supply the various parameters in the file name, and then information in the <filename>Book_Info.xml</filename> file for any parameters missing from the <filename>publican.cfg</filename> file. Refer to <xref linkend="sect-Users_Guide-Using_the_publican_package-Files_in_the_Book_Directory"/> for details of configuring these files. Additionally:
			<itemizedlist>
			<listitem><para>web RPM packages include the element <literal>-web-</literal> between the product version and the language code.</para></listitem>
			<listitem><para>SRPM packages have the file extension <literal>.src.rpm</literal> but binary RPM packages have the file extension <literal>.rpm</literal> </para></listitem>
			<listitem><para>binary RPM packages include <literal><replaceable>[build_target]</replaceable>.noarch</literal> before the file extension, where <replaceable>[build_target]</replaceable> represents the operating system and version that the package is built for as set by the <parameter>os_ver</parameter> parameter in the <filename>publican.cfg</filename> file. The <literal>noarch</literal> element specifies that the package can be installed on any system, regardless of the system architecture.</para></listitem>
			<listitem><para>use of the <option>--short_sighted</option> option removes the <literal>-<replaceable>productnumber</replaceable>-</literal> from the package name.</para></listitem>
			</itemizedlist>
		</para>
		<section id="sect-Users_Guide-Using_the_publican_package-Packaging_a_Book-The_publican_package_command-Example_usage">
			<title>The <command>publican package</command> command — Example usage</title>
			<para>
				The following examples illustrate some common options, illustrated with the <citetitle>Foomaster 9 Configuration Guide</citetitle>, edition 2, revision 6.
			</para>
			<variablelist>
				<varlistentry>
					<term><command>publican package --lang=cs-CZ</command></term>
					<listitem>
						<para>
							produces a web SRPM package named <package>Foomaster-Configuration_Guide-9-web-cs-CZ-2-6.src.rpm</package> that contains documentation in Czech.
						</para>
					</listitem>
				</varlistentry>
				<varlistentry>
					<term><command>publican package --desktop --lang=cs-CZ</command></term>
					<listitem>
						<para>
							produces a desktop SRPM package named <package>Foomaster-Configuration_Guide-9-cs-CZ-2-6.src.rpm</package> that contains documentation in Czech.
						</para>
					</listitem>
				</varlistentry>
				<varlistentry>
					<term><command>publican package --binary --lang=cs-CZ</command></term>
					<listitem>
						<para>
							produces a web binary RPM package named <package>Foomaster-Configuration_Guide-9-web-cs-CZ-2-6.el5.noarch.rpm</package> that contains documentation in Czech, built for the Red Hat Enterprise Linux 5 operating system.
						</para>
					</listitem>
				</varlistentry>
				<varlistentry>
					<term><command>publican package --desktop --binary --lang=cs-CZ</command></term>
					<listitem>
						<para>
							produces a desktop binary RPM package named <package>Foomaster-Configuration_Guide-9-cs-CZ-2-6.el5.noarch.rpm</package> that contains documentation in Czech, built for the Red Hat Enterprise Linux 5 operating system.
						</para>
					</listitem>
				</varlistentry>
				<varlistentry>
					<term><command>publican package --desktop --short_sighted --lang=cs-CZ</command></term>
					<listitem>
						<para>
							produces a desktop SRPM package named <package>Foomaster-Configuration_Guide-cs-CZ-2-6.src.rpm</package> that contains documentation in Czech. This package will replace any Configuration Guides for previous versions of <application>Foomaster</application> that exists on a system. Users cannot have access to both the <citetitle>Foomaster 8 Configuration Guide</citetitle> and the <citetitle>Foomaster 9 Configuration Guide</citetitle>.
						</para>
					</listitem>
				</varlistentry>
			</variablelist>
		</section>
	</section>
</section>

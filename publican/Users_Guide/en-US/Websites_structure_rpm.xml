<?xml version='1.0' encoding='utf-8' ?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
<!ENTITY % BOOK_ENTITIES SYSTEM "Users_Guide.ent">
%BOOK_ENTITIES;
]>


<section id="sect-Users_Guide-Website-structure-cfg_and_db-rpm">
	<title>Creating the website structure</title>
	<warning>
		<title>Warning — This procedure replaces files</title>
		<para>
			When you create the website structure, <application>Publican</application> places files in the <filename>/var/www/html/docs</filename> directory. Existing files in this directory might be overwritten by this procedure.
		</para>
	</warning>
	<para>
		Perform the following steps on your webserver. You must have an account with root privileges. 
	</para>

	<procedure>
		<step>
			<para>
				Log into the webserver.
			</para>
		</step>
		<step>
			<para>
				Become root:
			</para>
<screen><command>su -</command></screen>
		</step>
		<step>
			<para>
				Install <application>Publican</application>. For example, on a webserver with a Fedora operating system, run:
			</para>
<screen><command>yum install publican</command></screen>
		</step>
		<step>
			<para>
				Delete the default configuration file that <application>Publican</application> creates at <filename>/etc/publican-website.cfg</filename>:
			</para>
<screen><command>rm /etc/publican-website.cfg</command></screen>
		</step>
		<step>
			<para>
				Run <command>publican create_site</command> with the following parameters:
			</para>
<screen><command>publican create_site --site_config /etc/publican-website.cfg </command>
<command>--db_file /var/lib/publican/publican-website.db --toc_path /var/www/html/docs</command></screen>
			<para>
				(although this command is presented here on two lines, enter it as a single line)
			</para>
		</step>
		<step>
			<para>
				Edit the <filename>/etc/publican-website.cfg</filename> file to specify the name of the site, the web host, and optionally, search parameters for the site.
			</para>
			<substeps>
				<step>
					<para>
						Specify the title with the <parameter>title</parameter> parameter, for example:
					</para>
<programlisting>title: "Foomaster Documentation"</programlisting>
					<para>
						Normally, visitors to your website do not see this title because the site's JavaScript redirects them to a homepage. However, this title is likely to be found and indexed by search engines. 
					</para>
				</step>
				<step>
					<para>
						Specify the web host with the <parameter>web_host</parameter> parameter as a full URL, including the protocol (for example, <literal>http://</literal>). For example:
					</para>
<programlisting>web_host: http://docs.example.com</programlisting>
					<para>
						<application>Publican</application> uses the value set for <parameter>web_host</parameter> to construct the URLs in the XML <filename>Sitemap</filename> that it creates for search engine crawlers, and to limit searches submitted through the search box in the navigation menu to results on your site only.
					</para>
				</step>
				<step>
					<para>
						Optionally, construct a search engine query to use with the search box in the navigation menu and specify the entire content of a HTML <sgmltag>&lt;form&gt;</sgmltag> with the <parameter>web_search</parameter> parameter. If you do not specify a custom web search, <application>Publican</application> creates a Google search limited to the host that you specified in the <parameter>web_host</parameter> parameter. 
					</para>
					<para>
						For example, to construct a Yahoo! search limited to <literal>docs.example.com</literal>, set:
					</para>
<programlisting language="HTML">web_search: '&lt;form target="_top" method="get" action="http://search.yahoo.com/search"&gt; &lt;div class="search"&gt; &lt;input type="text" name="p" value="" /&gt; &lt;input type="hidden" name="vs" value="docs.example.com" /&gt; &lt;input type="submit" value="###Search###" /&gt; &lt;/div&gt; &lt;/form&gt;'</programlisting>
					<para>
						Refer to the documentation of your chosen search engine for details of how to construct custom searches. 
					</para>
					<para>
						If you set <literal>value="###Search###"</literal> in the code for a submit button, <application>Publican</application> uses the word <literal>Search</literal> on the button, localized into any language that <application>Publican</application> supports. 
					</para>
					<important>
						<title>Important — the web_search parameter is not validated</title>
						<para>
							<application>Publican</application> does not validate the <parameter>web_search</parameter> parameter, but builds the value of this parameter into the navigation menu exactly as you specify it. Be especially careful when you use this feature.
						</para>
					</important>
				</step>	
				<step>
					<para>
						Optionally, set the default language of the website. <application>Publican</application> creates a separate, translatable navigation menu for each language in which you publish documentation. However, if a document is not available in a particular language, <application>Publican</application> links visitors to the untranslated version of that document. To specify the default, untranslated language for the site, set <parameter>def_lang</parameter> with a language code. For example:
					</para>
<programlisting>def_lang: fr-FR</programlisting>
					<para>
						With <parameter>def_lang</parameter> set to <literal>fr-FR</literal>, visitors viewing the navigation menu in (for example) Spanish are presented with a link to the original French version of the document if the document has not yet been translated into Spanish.
					</para>
				</step>
			</substeps>
		</step>
	</procedure>
	<para>
		To make <application>Publican</application> refresh the site structure at any time, run: 
	</para>
<screen><command>publican update_site --site_config /etc/publican-website.cfg</command></screen>
</section>
			

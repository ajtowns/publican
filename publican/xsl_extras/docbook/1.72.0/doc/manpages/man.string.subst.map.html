<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>man.string.subst.map</title><link rel="stylesheet" href="../css/reference.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.0"><link rel="start" href="index.html" title="Manpages Parameter Reference"><link rel="up" href="charmap.html" title="Character/string substitution"><link rel="prev" href="man.string.subst.map.local.pre.html" title="man.string.subst.map.local.pre"><link rel="next" href="man.string.subst.map.local.post.html" title="man.string.subst.map.local.post"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">man.string.subst.map</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="man.string.subst.map.local.pre.html">Prev</a>&nbsp;</td><th width="60%" align="center">Character/string substitution</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="man.string.subst.map.local.post.html">Next</a></td></tr></table><hr></div><div class="refentry" lang="en"><a name="man.string.subst.map"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>man.string.subst.map &#8212; Specifies a set of string substitutions</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><a name="man.string.subst.map.frag"></a><pre class="programlisting">
&lt;xsl:param name="man.string.subst.map"&gt;

  &lt;!-- ******************************************************************** --&gt;
  &lt;!-- *  --&gt;
  &lt;!-- * The backslash and dot (\, .) characters have special meaning --&gt;
  &lt;!-- * for roff, so we escape those characters when they appear in --&gt;
  &lt;!-- * the source content, and we use certain (arbitrarily --&gt;
  &lt;!-- * selected) Unicode characters as the internal representations --&gt;
  &lt;!-- * for those characters, then replace them with real --&gt;
  &lt;!-- * backslashes and dots in output. In addition, for certain --&gt;
  &lt;!-- * reasons, we do the same thing for dashes. The mappings of --&gt;
  &lt;!-- * those characters to the Unicode characters we use to --&gt;
  &lt;!-- * represent them is hard-coded: --&gt;
  &lt;!-- *  --&gt;
  &lt;!-- *   - U+2591 = dash --&gt;
  &lt;!-- *   - U+2593 = backslash --&gt;
  &lt;!-- *   - U+2302 = dot --&gt;
  &lt;!-- *  --&gt;
  &lt;!-- ******************************************************************** --&gt;

  &lt;!-- * escape backslashes in content; we use "\e" instead of "\\" --&gt;
  &lt;!-- * because the groff docs say that's the correct thing to do; also --&gt;
  &lt;!-- * because testing shows that "\\" doesn't always work as expected; --&gt;
  &lt;!-- * for example, "\\" within a table seems to mess things up --&gt;
  &lt;substitution oldstring="\" newstring="\e"&gt;&lt;/substitution&gt;
  &lt;!-- * fix bad font-request capitalization in .SH (stylesheet artifact) --&gt;
  &lt;substitution oldstring="&#9619;FB" newstring="\fB"&gt;&lt;/substitution&gt;
  &lt;substitution oldstring="&#9619;FI" newstring="\fI"&gt;&lt;/substitution&gt;
  &lt;substitution oldstring="&#9619;FR" newstring="\fR"&gt;&lt;/substitution&gt;
  &lt;!-- * remove no-break marker at beginning of line (stylesheet artifact) --&gt; 
  &lt;substitution oldstring="&#9618;&#9600;" newstring="&#9618;"&gt;&lt;/substitution&gt;
  &lt;!-- * replace U+2580 no-break marker (stylesheet-added) w/ no-break space --&gt;
  &lt;substitution oldstring="&#9600;" newstring="\ "&gt;&lt;/substitution&gt;
  &lt;!-- * replace U+2593 marker with backslash --&gt; 
  &lt;substitution oldstring="&#9619;" newstring="\"&gt;&lt;/substitution&gt;
  &lt;!-- * escape dashes in content (only at line beginnings) --&gt;
  &lt;substitution oldstring="
." newstring="
\&amp;."&gt;&lt;/substitution&gt;
  &lt;!-- * replace U+2302 marker with dot --&gt;
  &lt;substitution oldstring="&#8962;" newstring="."&gt;&lt;/substitution&gt;
  &lt;!-- * escape dashes in content --&gt;
  &lt;substitution oldstring="-" newstring="\-"&gt;&lt;/substitution&gt;
  &lt;!-- * replace U+2591 marker with dash --&gt;
  &lt;substitution oldstring="&#9617;" newstring="-"&gt;&lt;/substitution&gt;

  &lt;!-- ==================================================================== --&gt;

  &lt;!-- * squeeze multiple newlines before a roff request  --&gt;
  &lt;substitution oldstring="

." newstring="
."&gt;&lt;/substitution&gt;
  &lt;!-- * remove any .sp occurences that directly follow a .PP  --&gt;
  &lt;substitution oldstring=".PP
.sp" newstring=".PP"&gt;&lt;/substitution&gt;
  &lt;!-- * squeeze multiple newlines after start of no-fill (verbatim) env. --&gt;
  &lt;substitution oldstring=".nf

" newstring=".nf
"&gt;&lt;/substitution&gt;
  &lt;!-- * squeeze multiple newlines after REstoring margin --&gt;
  &lt;substitution oldstring=".RE

" newstring=".RE
"&gt;&lt;/substitution&gt;
  &lt;!-- * an apostrophe at the beginning of a line gets interpreted as a --&gt;
  &lt;!-- * roff request (groff(7) says it is "the non-breaking control --&gt;
  &lt;!-- * character"); so we must add backslash before any apostrophe --&gt;
  &lt;!-- * found at the start of a line --&gt;
  &lt;substitution oldstring="
'" newstring="
\'"&gt;&lt;/substitution&gt;
  &lt;!-- * --&gt;
  &lt;!-- * non-breaking space --&gt;
  &lt;!-- * --&gt;
  &lt;!-- * A no-break space can be written two ways in roff; the difference, --&gt;
  &lt;!-- * according to the "Page Motions" node in the groff info page, ixsl: --&gt;
  &lt;!-- * --&gt;
  &lt;!-- *   "\ " = --&gt;
  &lt;!-- *   An unbreakable and unpaddable (i.e. not expanded during filling) --&gt;
  &lt;!-- *   space. --&gt;
  &lt;!-- * --&gt;
  &lt;!-- *   "\~" = --&gt;
  &lt;!-- *   An unbreakable space that stretches like a normal --&gt;
  &lt;!-- *   inter-word space when a line is adjusted."  --&gt;
  &lt;!-- * --&gt;
  &lt;!-- * Unfortunately, roff seems to do some weird things with long --&gt;
  &lt;!-- * lines that only have words separated by "\~" spaces, so it's --&gt;
  &lt;!-- * safer just to stick with the "\ " space --&gt;
  &lt;substitution oldstring="&nbsp;" newstring="\ "&gt;&lt;/substitution&gt;
  &lt;!-- * x2008 is a "punctuation space"; we must replace it here because, --&gt;
  &lt;!-- * for certain reasons, the stylesheets add it before and after --&gt;
  &lt;!-- * every Parameter in Funcprototype output --&gt;
  &lt;substitution oldstring="&#8200;" newstring=" "&gt;&lt;/substitution&gt;
  &lt;!-- * --&gt;
  &lt;!-- * Now deal with some other characters that are added by the --&gt;
  &lt;!-- * stylesheets during processing. --&gt;
  &lt;!-- * --&gt;
  &lt;!-- * bullet --&gt;
  &lt;substitution oldstring="&#8226;" newstring="\(bu"&gt;&lt;/substitution&gt;
  &lt;!-- * left double quote --&gt;
  &lt;substitution oldstring="&#8220;" newstring="\(lq"&gt;&lt;/substitution&gt;
  &lt;!-- * right double quote --&gt;
  &lt;substitution oldstring="&#8221;" newstring="\(rq"&gt;&lt;/substitution&gt;
  &lt;!-- * left single quote --&gt;
  &lt;substitution oldstring="&#8216;" newstring="\(oq"&gt;&lt;/substitution&gt;
  &lt;!-- * right single quote --&gt;
  &lt;substitution oldstring="&#8217;" newstring="\(cq"&gt;&lt;/substitution&gt;
  &lt;!-- * copyright sign --&gt;
  &lt;substitution oldstring="&copy;" newstring="\(co"&gt;&lt;/substitution&gt;
  &lt;!-- * registered sign --&gt;
  &lt;substitution oldstring="&reg;" newstring="\(rg"&gt;&lt;/substitution&gt;
  &lt;!-- * servicemark... --&gt;
  &lt;!-- * There is no groff equivalent for it. --&gt;
  &lt;substitution oldstring="&#8480;" newstring="(SM)"&gt;&lt;/substitution&gt;
  &lt;!-- * trademark... --&gt;
  &lt;!-- * We don't do "\(tm" because for console output, --&gt;
  &lt;!-- * groff just renders that as "tm"; that is: --&gt;
  &lt;!-- * --&gt;
  &lt;!-- *   Product&amp;#x2122; -&gt; Producttm --&gt;
  &lt;!-- * --&gt;
  &lt;!-- * So we just make it to "(TM)" instead; thus: --&gt;
  &lt;!-- * --&gt;
  &lt;!-- *   Product&amp;#x2122; -&gt; Product(TM) --&gt;
  &lt;substitution oldstring="&#8482;" newstring="(TM)"&gt;&lt;/substitution&gt;

  &lt;!-- ==================================================================== --&gt;

  &lt;!-- * we use U+2592 as a marker for the newline before output of &lt;sbr&gt;; --&gt;
  &lt;!-- * so we now need to replace U+2592 marker with a real newline --&gt;
  &lt;substitution oldstring="&#9618;" newstring="
"&gt;&lt;/substitution&gt;

&lt;/xsl:param&gt;
</pre></div><div class="refsect1" lang="en"><a name="d0e1608"></a><h2>Description</h2><p>The <a href="man.string.subst.map.html"><em class="parameter"><code>man.string.subst.map</code></em></a> parameter
contains <a href="man.string.subst.map.html#map" title="Contents of the substitution map">a map</a> that specifies a set of
string substitutions to perform over the entire roff source for each
man page, either just before generating final man-page output (that
is, before writing man-page files to disk) or, if the value of the
<a href="man.charmap.enabled.html"><em class="parameter"><code>man.charmap.enabled</code></em></a> parameter is non-zero,
before applying the roff character map.</p><p>You can use <a href="man.string.subst.map.html"><em class="parameter"><code>man.string.subst.map</code></em></a> as a
&#8220;lightweight&#8221; character map to perform &#8220;essential&#8221; substitutions --
that is, substitutions that are <span class="emphasis"><em>always</em></span> performed,
even if the value of the <a href="man.charmap.enabled.html"><em class="parameter"><code>man.charmap.enabled</code></em></a>
parameter is zero. For example, you can use it to replace quotation
marks or other special characters that are generated by the DocBook
XSL stylesheets for a particular locale setting (as opposed to those
characters that are actually in source XML documents), or to replace
any special characters that may be automatically generated by a
particular customization of the DocBook XSL stylesheets.</p><div class="warning"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="../images/warning.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Do you not change value of the
  <a href="man.string.subst.map.html"><em class="parameter"><code>man.string.subst.map</code></em></a> parameter unless you are
  sure what you are doing. First consider adding your
  string-substitution mappings to either or both of the following
  parameters:
  </p><div class="variablelist"><dl><dt><span class="term"><a href="man.string.subst.map.local.pre.html"><em class="parameter"><code>man.string.subst.map.local.pre</code></em></a></span></dt><dd><p>applied before
      <a href="man.string.subst.map.html"><em class="parameter"><code>man.string.subst.map</code></em></a></p></dd><dt><span class="term"><a href="man.string.subst.map.local.post.html"><em class="parameter"><code>man.string.subst.map.local.post</code></em></a></span></dt><dd><p>applied after
      <a href="man.string.subst.map.html"><em class="parameter"><code>man.string.subst.map</code></em></a></p></dd></dl></div><p>
  By default, both of those parameters contain no
  string substitutions. They are intended as a means for you to
  specify your own local string-substitution mappings.</p><p>If you remove any of default mappings from the value of the
  <a href="man.string.subst.map.html"><em class="parameter"><code>man.string.subst.map</code></em></a> parameter, you are
  likely to end up with broken output. And be very about adding
  anything to it; it&#8217;s used for doing string substitution over the
  entire roff source of each man page &#8211; it causes target strings to be
  replaced in roff requests and escapes, not just in the visible
  contents of the page.</p></td></tr></table></div><div class="refsect2" lang="en"><a name="map"></a><h3>Contents of the substitution map</h3><p>The string-substitution map contains one or more <code class="sgmltag-element">substitution</code> elements, each of which has two attributes:
  </p><div class="variablelist"><dl><dt><span class="term">oldstring</span></dt><dd>string to replace</dd><dt><span class="term">newstring</span></dt><dd>string with which to replace <code class="sgmltag-attribute">oldstring</code></dd></dl></div><p>
  It may also include XML comments (that is, delimited with
  "<code class="literal">&lt;!--</code>" and "<code class="literal">--&gt;</code>").
  </p></div><div class="refsect2" lang="en"><a name="escape-replace"></a><h3>About escaping and replacing backslash, dot, and dash</h3><p>The backslash and dot (\, .) characters have special meaning
  for roff, so we:

  </p><div class="itemizedlist"><ul type="disc"><li><p>escape backslashes and dots where they appear in the
      source content</p></li><li><p>use certain (arbitrarily selected) Unicode characters as
      &#8220;markers&#8221; &#8211; internal representations within the stylesheet &#8211; for
      backslashes and dots</p></li><li><p>replace the Unicode characters with real backslashes and
      dotes before output gets serialized</p></li></ul></div><p>
  
   In addition, for certain reasons, we do the same thing for
   dashes.</p><p>The mappings of dash, backslash, and dot to the Unicode
  characters we use to represent them is hard-coded in the stylesheet:

  </p><div class="itemizedlist"><ul type="disc"><li><p><code class="literal">U+2591</code> = dash</p></li><li><p><code class="literal">U+2593</code> = backslash</p></li><li><p><code class="literal">U+2302</code> = dot</p></li></ul></div><p>

  Those Unicode characters were chosen on the assumption that they are
  never used in content intended for output to man pages. It would be
  possible to provide a way for configuring the mappings (using XSLT
  parameters), but doing so would make the stylesheet code much more
  verbose and harder to read.</p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="man.string.subst.map.local.pre.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="charmap.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="man.string.subst.map.local.post.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">man.string.subst.map.local.pre&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;man.string.subst.map.local.post</td></tr></table></div></body></html>